<h1>Routes View</h1>

<h2>Add a new location</h2>
<%= form_for @location do |f| %>
  <%= f.label :"location name" %>:
  <%= f.text_field :name %><br />
  <%= f.label :"address or coordinates" %>:
  <%= f.text_field :address %><br />
  <% f.hidden_field(:user_id, :value => current_user.id) %>

  <%= f.submit %>
<% end %>

<h2>My Locations</h2>
<ul>
	<% @my_locations.each do |location| %>
	<li>
		<%= location.name %>
		<%= location.address %>
		<p>Click the button to get your estimated drive time from your current location.</p>

		<button onclick="getLocation()">Get Route Time</button>

		<p id="demo"></p>

		<script>
		var x = document.getElementById("demo");

		function getLocation() {
		  if (navigator.geolocation) {
		      navigator.geolocation.getCurrentPosition(showPosition);
		  } else { 
		      x.innerHTML = "Geolocation is not supported by this browser.";
		  }
		}

		function showPosition(position) {
		  x.innerHTML = "Latitude: " + position.coords.latitude + 
		  "<br>Longitude: " + position.coords.longitude;
		}
		</script>
		<%= button_to "Test API", get_data_path %>
	</li>
	<% end %>
</ul>